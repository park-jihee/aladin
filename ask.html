<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic" rel="stylesheet">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <title>Document</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      list-style: none;
      font-family: 'Nanum Gothic', sans-serif;
    }

    header {
      width: 100%;
      height: 60px;
      background-color: #f83;
    }

    header img {
      width: 70px;
      height: 40px;
    }

    .search-input {
      width: 100%;
      margin: 0px 20px;
      height: 40px;
    }

    .title {
      font-size: 15px;
    }

    #img {
      width: 300px;
      height: 400px;
      margin: 0 auto;
      background-color: #e32e32;
      margin-top: 20px;
    }

    #content {
      width: 100%;
      background-color: #e5e5e5;
      margin-top: 20px;
    }

    #content p {
      padding: 10px;
    }

    .book-img {
      width: 100%;
      height: 300px;
      margin: 0 auto;
    }

    .book-main-img{
        width: 200px;
        height: 300px;
        margin: 0 auto;
    }

    .book-main-img img{
        width: 100%;
        height: 250px;
        margin: 25px 0px;
    }
    .book-info {
      width: 100%;
      height: 100px;
    }

    .book-explain {
      width: 100%;
      height: 150px;
      background-color: #e5e5e5;
    }

    .book-anthor {
      width: 100%;
      height: 100px;
    }

    .book-content {
      width: 100%;
      height: 50px;
      line-height: 50px;
      padding-left: 20px;
      float: left;
    }

    .book-subcon {
      width: 100px;
      font-size: 13px;
      float: left;
    }

    .book-price,
    .book-mileage {
      width: 100%;
      height: 50px;
      font-size: 13px;
    }

    .book-sale {
      width: 100%;
      height: 50px;
      font-size: 13px;
      color: #e32e32;
    }
  </style>
</head>

<body>
  <header>
    <div class="header-logo">
        잉키가 만드는 헤더
    </div>
  </header>
  <section>
    <div class="book-img">
        <div class="book-main-img">

        </div>
    </div>
    <div class="book-info">
      <p class="book-title"></p>
      <p class="book-author"></p>
    </div>
    <div class="book-explain">
      <div class="book-content">
        <div class="book-subcon">원가</div>
        <div class="book-price"></div>
      </div>
      <div class="book-content">
        <div class="book-subcon">판매가</div>
        <div class="book-sale"></div>
      </div>
      <div class="book-content">
        <div class="book-subcon">마일리지</div>
        <div class="book-mileage"></div>
      </div>
    </div>
  </section>
</body>
<script>
  getParameterByName('isbn');

  function getParameterByName(isbn) {
    var url = window.location.href;
    isbn = isbn.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + isbn + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
        requestList(results[2]);
  }

  function requestList(isbn) {
    var visbn = isbn;
    var key = 'ttbbrs07041856003';
    var url = 'http://www.aladin.co.kr/ttb/api/ItemLookUp.aspx';
    url += '?' + encodeURIComponent('ttbkey') + '=' + encodeURIComponent(key);
    url += '&' + encodeURIComponent('itemIdType') + '=' + encodeURIComponent('ISBN13');
    url += '&' + encodeURIComponent('ItemId') + '=' + visbn + '&output=xml';
    responseList(url);
  }

  function responseList(url) {
    var param = url;
    var title, link, author, cover, img, priceSales, priceStandard, milleage;

    $.get(param, function (res) {
      var items = $(res).find('item');
      for (var i = 0; i < items.length; i++) {
        console.log(items[i]);
        title = $(items[i]).find('title').text();
        link = $(items[i]).find('link').text();
        author = $(items[i]).find('authors > author').text();
        cover = $(items[i]).find('cover').text();
        priceSales = $(items[i]).find('priceSales').text();
        priceStandard = $(items[i]).find('priceStandard').text();
        mileage = $(items[i]).find('mileage').text();
        img = "<img src=" + cover + ">"
      }
      $('.book-main-img').append(img);
      $('.book-title').append(title);
      $('.book-author').append(author);
      $('.book-price').append(priceStandard + '원');
      $('.book-sale').append(priceSales + '원');
      $('.book-mileage').append(mileage + '원');
    });
  }
</script>

</html>